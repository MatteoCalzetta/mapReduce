# Sorting with MapReduce using RPC in Go

This repository contains an implementation of a distributed sorting algorithm using the **MapReduce** paradigm. The solution leverages **RPC (Remote Procedure Call)** for communication between the **client**, **master**, and **workers**.

---

## Table of Contents
- [Overview](#overview)
- [System Architecture](#system-architecture)
- [Workflow](#workflow)
- [Installation and Usage](#installation-and-usage)

---

## Overview

The application sorts an array of random integers generated by the client. The sorting process is distributed across multiple workers using the **MapReduce** approach. The client interacts with the system to initiate the sorting task, while the master orchestrates the MapReduce process, and the workers execute the core tasks.

Key features include:
- **Random Array Generation**: The client generates an array of integers within a specified range and size.
- **Map Phase**: The array is divided into chunks, and workers map key-value pairs.
- **Reduce Phase**: Workers exchange and integrate values to produce sorted subarrays.
- **Final Result**: The master collects results from workers, compiles the sorted array, and writes it to a `result.txt` file.

---

##Running the program

1. **Execute docker compose
   Inside the root folder (mapReduce), execute the command `docker-compose up --build`

2. **Stop workflow execution
   Run the command `docker-compose down`

## System Architecture

1. **Client**:
   - Generates a random integer array of a specified size and range.
   - Sends the array to the master and waits for the sorted result.
   
2. **Master**:
   - Divides the array into chunks based on the number of workers.
   - Assigns each chunk to a worker for the mapping phase.
   - Orchestrates the reduce phase where workers exchange and integrate values.
   - Collects the final sorted subarrays from workers and produces the final sorted array.
   - Writes the result to `result.txt` and notifies the client.

4. **Workers**:
   - Perform the mapping phase by generating key-value pairs from the assigned chunk.
   - Exchange and integrate values with other workers during the reduce phase.
   - Return the final sorted subarray for their range to the master.

---

## Workflow

### 1. Initialization
- The client generates an array of random integers with:
  - A specified **size** (number of elements= 100).
  - A defined **range** (minimum and maximum values, min=1 max=30).

### 2. Map Phase
- The master:
  - Divides the array into chunks based on the number of workers (workers are pre-knowned, workers=5).
  - Sends each chunk to a worker using RPC.
- Each worker:
  - Processes its chunk to create key-value pairs for sorting, in this phase workers are knowned as mappers.

### 3. Reduce Phase
- Workers exchange values based on the ranges assigned by the master.
- Each worker integrates the exchanged values into a final sorted subarray, in this phase workers are knowned as reducers.

### 4. Finalization
- Workers send their sorted subarrays to the master.
- The master compiles the sorted subarrays into a final sorted array.
- The sorted array is written to `result.txt` and sent to the client.

---

## Installation and Usage

### Prerequisites
- **Go** installed on your system (version 1.23.4 or later recommended).

### Steps to Run
1. Run the master:
      Open a terminal and move in master folder with `cd mapReduce/master` and run `go run master.go`, master open a connection by default on `127.0.0.1:8080`.
   
2. Run workers:
      Open a temrinal and move in worker folder with `cd mapReduce/worker` and run `go run worker.go -ID=workerId`, worker has `IDs from 1 to 5` and open connection by default on `127.0.0.1:5051` `:5052` `:5053` `:5054` `:5055`.

3. Run the client:
      Open a temrinal and move in client folder with `cd mapReduce/client` and run `go run client.go`, client connect to master on his address.




